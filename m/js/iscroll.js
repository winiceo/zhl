/*!
 * iScroll v4.2.2 ~ Copyright (c) 2012 Matteo Spinelli, http://cubiq.org
 * Released under MIT license, http://cubiq.org/license
 */
(function(d,E){var v=Math,D=[],b=E.createElement("div").style,u=(function(){var H="webkitT,MozT,msT,OT,t".split(","),G,F=0,m=H.length;for(;F<m;F++){G=H[F]+"ransform";if(G in b){return H[F].substr(0,H[F].length-1)}}return false})(),C=u?"-"+u.toLowerCase()+"-":"",k=s("transform"),y=s("transitionProperty"),l=s("transitionDuration"),a=s("transformOrigin"),r=s("transitionTimingFunction"),g=s("transitionDelay"),q=(/android/gi).test(navigator.appVersion),A=(/hp-tablet/gi).test(navigator.appVersion),j=s("perspective") in b,z="ontouchstart" in d&&!A,f=!!u,h=s("transition") in b,i="onorientationchange" in d?"orientationchange":"resize",c=z?"touchstart":"mousedown",t=z?"touchmove":"mousemove",e=z?"touchend":"mouseup",x=z?"touchcancel":"mouseup",n=(function(){if(u===false){return false}var m={"":"transitionend",webkit:"webkitTransitionEnd",Moz:"transitionend",O:"otransitionend",ms:"MSTransitionEnd"};return m[u]})(),p=(function(){return d.requestAnimationFrame||d.webkitRequestAnimationFrame||d.mozRequestAnimationFrame||d.oRequestAnimationFrame||d.msRequestAnimationFrame||function(m){return setTimeout(m,1)}})(),B=(function(){return d.cancelRequestAnimationFrame||d.cancelAnimationFrame||d.webkitCancelRequestAnimationFrame||d.mozCancelRequestAnimationFrame||d.oCancelRequestAnimationFrame||d.msCancelRequestAnimationFrame||clearTimeout})(),o=j?" translateZ(0)":"",w=function(G,F){var H=this,m;H.wrapper=typeof G=="object"?G:E.getElementById(G);H.wrapper.style.overflow="hidden";H.scroller=H.wrapper.children[0];H.translateZ=o;H.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,topOffset:0,checkDOMChanges:false,handleClick:true,onRefresh:null,onBeforeScrollStart:function(I){I.preventDefault()},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null};for(m in F){H.options[m]=F[m]}H.x=H.options.x;H.y=H.options.y;H.options.useTransform=f&&H.options.useTransform;H.options.useTransition=h&&H.options.useTransition;H.scroller.style[y]=H.options.useTransform?C+"transform":"top left";H.scroller.style[l]="0";H.scroller.style[a]="0 0";if(H.options.useTransition){H.scroller.style[r]="cubic-bezier(0.33,0.66,0.66,1)"}if(H.options.useTransform){H.scroller.style[k]="translate("+H.x+"px,"+H.y+"px)"+o}else{H.scroller.style.cssText+=";position:absolute;top:"+H.y+"px;left:"+H.x+"px"}H.refresh();H._bind(i,d);H._bind(c);if(H.options.checkDOMChanges){H.checkDOMTime=setInterval(function(){H._checkDOMChanges()},500)}};w.prototype={enabled:true,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,isStopScrollAction:false,handleEvent:function(F){var m=this;switch(F.type){case c:if(!z&&F.button!==0){return}m._start(F);break;case t:m._move(F);break;case e:case x:m._end(F);break;case i:m._resize();break;case n:m._transitionEnd(F);break}},_checkDOMChanges:function(){if(this.moved||this.animating||(this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale)){return}this.refresh()},_resize:function(){var m=this;setTimeout(function(){m.refresh()},q?200:0)},_pos:function(m,F){m=this.hScroll?m:0;F=this.vScroll?F:0;if(this.options.useTransform){this.scroller.style[k]="translate("+m+"px,"+F+"px) scale("+this.scale+")"+o}else{m=v.round(m);F=v.round(F);this.scroller.style.left=m+"px";this.scroller.style.top=F+"px"}this.x=m;this.y=F},_start:function(K){var J=this,F=z?K.touches[0]:K,I,m,L,H,G;if(!J.enabled){return}if(J.options.onBeforeScrollStart){J.options.onBeforeScrollStart.call(J,K)}if(J.options.useTransition){J._transitionTime(0)}J.moved=false;J.animating=false;J.distX=0;J.distY=0;J.absDistX=0;J.absDistY=0;J.dirX=0;J.dirY=0;J.isStopScrollAction=false;if(J.options.momentum){if(J.options.useTransform){I=getComputedStyle(J.scroller,null)[k].replace(/[^0-9\-.,]/g,"").split(",");m=+I[4];L=+I[5]}else{m=+getComputedStyle(J.scroller,null).left.replace(/[^0-9-]/g,"");L=+getComputedStyle(J.scroller,null).top.replace(/[^0-9-]/g,"")}if(v.round(m)!=v.round(J.x)||v.round(L)!=v.round(J.y)){J.isStopScrollAction=true;if(J.options.useTransition){J._unbind(n)}else{B(J.aniTime)}J.steps=[];J._pos(m,L);if(J.options.onScrollEnd){J.options.onScrollEnd.call(J)}}}J.startX=J.x;J.startY=J.y;J.pointX=F.pageX;J.pointY=F.pageY;J.startTime=K.timeStamp||Date.now();if(J.options.onScrollStart){J.options.onScrollStart.call(J,K)}J._bind(t,d);J._bind(e,d);J._bind(x,d)},_move:function(K){var G=this,m=z?K.touches[0]:K,F=m.pageX-G.pointX,I=m.pageY-G.pointY,L=G.x+F,J=G.y+I,H=K.timeStamp||Date.now();if(G.options.onBeforeScrollMove){G.options.onBeforeScrollMove.call(G,K)}G.pointX=m.pageX;G.pointY=m.pageY;if(L>0||L<G.maxScrollX){L=G.options.bounce?G.x+(F/2):L>=0||G.maxScrollX>=0?0:G.maxScrollX}if(J>G.minScrollY||J<G.maxScrollY){J=G.options.bounce?G.y+(I/2):J>=G.minScrollY||G.maxScrollY>=0?G.minScrollY:G.maxScrollY}G.distX+=F;G.distY+=I;G.absDistX=v.abs(G.distX);G.absDistY=v.abs(G.distY);if(G.absDistX<6&&G.absDistY<6){return}if(G.options.lockDirection){if(G.absDistX>G.absDistY+5){J=G.y;I=0}else{if(G.absDistY>G.absDistX+5){L=G.x;F=0}}}G.moved=true;G._beforePos?G._beforePos(J,I)&&G._pos(L,J):G._pos(L,J);G.dirX=F>0?-1:F<0?1:0;G.dirY=I>0?-1:I<0?1:0;if(H-G.startTime>300){G.startTime=H;G.startX=G.x;G.startY=G.y}if(G.options.onScrollMove){G.options.onScrollMove.call(G,K)}},_end:function(L){if(z&&L.touches.length!==0){return}var I=this,O=z?L.changedTouches[0]:L,G,N,F={dist:0,time:0},m={dist:0,time:0},H=(L.timeStamp||Date.now())-I.startTime,M=I.x,K=I.y,J;I._unbind(t,d);I._unbind(e,d);I._unbind(x,d);if(I.options.onBeforeScrollEnd){I.options.onBeforeScrollEnd.call(I,L)}if(!I.moved){if(z&&this.options.handleClick&&!I.isStopScrollAction){I.doubleTapTimer=setTimeout(function(){I.doubleTapTimer=null;G=O.target;while(G.nodeType!=1){G=G.parentNode}if(G.tagName!="SELECT"&&G.tagName!="INPUT"&&G.tagName!="TEXTAREA"){N=E.createEvent("MouseEvents");N.initMouseEvent("click",true,true,L.view,1,O.screenX,O.screenY,O.clientX,O.clientY,L.ctrlKey,L.altKey,L.shiftKey,L.metaKey,0,null);N._fake=true;G.dispatchEvent(N)}},0)}I._resetPos(400);if(I.options.onTouchEnd){I.options.onTouchEnd.call(I,L)}return}if(H<300&&I.options.momentum){F=M?I._momentum(M-I.startX,H,-I.x,I.scrollerW-I.wrapperW+I.x,I.options.bounce?I.wrapperW:0):F;m=K?I._momentum(K-I.startY,H,-I.y,(I.maxScrollY<0?I.scrollerH-I.wrapperH+I.y-I.minScrollY:0),I.options.bounce?I.wrapperH:0):m;M=I.x+F.dist;K=I.y+m.dist;if((I.x>0&&M>0)||(I.x<I.maxScrollX&&M<I.maxScrollX)){F={dist:0,time:0}}if((I.y>I.minScrollY&&K>I.minScrollY)||(I.y<I.maxScrollY&&K<I.maxScrollY)){m={dist:0,time:0}}}if(F.dist||m.dist){J=v.max(v.max(F.time,m.time),10);I.scrollTo(v.round(M),v.round(K),J);if(I.options.onTouchEnd){I.options.onTouchEnd.call(I,L)}return}I._resetPos(200);if(I.options.onTouchEnd){I.options.onTouchEnd.call(I,L)}},_resetPos:function(F){var m=this,G=m.x>=0?0:m.x<m.maxScrollX?m.maxScrollX:m.x,H=m.y>=m.minScrollY||m.maxScrollY>0?m.minScrollY:m.y<m.maxScrollY?m.maxScrollY:m.y;if(G==m.x&&H==m.y){if(m.moved){m.moved=false;if(m.options.onScrollEnd){m.options.onScrollEnd.call(m)}if(m._afterPos){m._afterPos()}}return}m.scrollTo(G,H,F||0)},_transitionEnd:function(F){var m=this;if(F.target!=m.scroller){return}m._unbind(n);m._startAni()},_startAni:function(){var J=this,I=J.x,K=J.y,F=Date.now(),H,m,G;if(J.animating){return}if(!J.steps.length){J._resetPos(400);return}H=J.steps.shift();if(H.x==I&&H.y==K){H.time=0}J.animating=true;J.moved=true;if(J.options.useTransition){J._transitionTime(H.time);J._pos(H.x,H.y);J.animating=false;if(H.time){J._bind(n)}else{J._resetPos(0)}return}G=function(){var L=Date.now(),N,M;if(L>=F+H.time){J._pos(H.x,H.y);J.animating=false;if(J.options.onAnimationEnd){J.options.onAnimationEnd.call(J)}J._startAni();return}L=(L-F)/H.time-1;m=v.sqrt(1-L*L);N=(H.x-I)*m+I;M=(H.y-K)*m+K;J._pos(N,M);if(J.animating){J.aniTime=p(G)}};G()},_transitionTime:function(m){m+="ms";this.scroller.style[l]=m},_momentum:function(L,H,m,J,N){var K=0.0006,G=v.abs(L)*(this.options.speedScale||1)/H,F=(G*G)/(2*K),M=0,I=0;if(L>0&&F>m){I=N/(6/(F/G*K));m=m+I;G=G*m/F;F=m}else{if(L<0&&F>J){I=N/(6/(F/G*K));J=J+I;G=G*J/F;F=J}}F=F*(L<0?-1:1);M=G/K;return{dist:F,time:v.round(M)}},_offset:function(m){var G=-m.offsetLeft,F=-m.offsetTop;while(m=m.offsetParent){G-=m.offsetLeft;F-=m.offsetTop}if(m!=this.wrapper){G*=this.scale;F*=this.scale}return{left:G,top:F}},_bind:function(F,m,G){D.concat([m||this.scroller,F,this]);(m||this.scroller).addEventListener(F,this,!!G)},_unbind:function(F,m,G){(m||this.scroller).removeEventListener(F,this,!!G)},destroy:function(){var G=this;G.scroller.style[k]="";G._unbind(i,d);G._unbind(c);G._unbind(t,d);G._unbind(e,d);G._unbind(x,d);if(G.options.useTransition){G._unbind(n)}if(G.options.checkDOMChanges){clearInterval(G.checkDOMTime)}if(G.options.onDestroy){G.options.onDestroy.call(G)}for(var F=0,m=D.length;F<m;){D[F].removeEventListener(D[F+1],D[F+2]);D[F]=null;F=F+3}D=[]},refresh:function(){var m=this,F;m.wrapperW=m.wrapper.clientWidth||1;m.wrapperH=m.wrapper.clientHeight||1;m.minScrollY=-m.options.topOffset||0;m.scrollerW=v.round(m.scroller.offsetWidth*m.scale);m.scrollerH=v.round((m.scroller.offsetHeight+m.minScrollY)*m.scale);m.maxScrollX=m.wrapperW-m.scrollerW;m.maxScrollY=m.wrapperH-m.scrollerH+m.minScrollY;m.dirX=0;m.dirY=0;if(m.options.onRefresh){m.options.onRefresh.call(m)}m.hScroll=m.options.hScroll&&m.maxScrollX<0;m.vScroll=m.options.vScroll&&(!m.options.bounceLock&&!m.hScroll||m.scrollerH>m.wrapperH);F=m._offset(m.wrapper);m.wrapperOffsetLeft=-F.left;m.wrapperOffsetTop=-F.top;m.scroller.style[l]="0";m._resetPos(400)},scrollTo:function(F,L,K,m){var J=this,I=F,H,G;J.stop();if(!I.length){I=[{x:F,y:L,time:K,relative:m}]}for(H=0,G=I.length;H<G;H++){if(I[H].relative){I[H].x=J.x-I[H].x;I[H].y=J.y-I[H].y}J.steps.push({x:I[H].x,y:I[H].y,time:I[H].time||0})}J._startAni()},scrollToElement:function(m,G){var F=this,H;m=m.nodeType?m:F.scroller.querySelector(m);if(!m){return}H=F._offset(m);H.left+=F.wrapperOffsetLeft;H.top+=F.wrapperOffsetTop;H.left=H.left>0?0:H.left<F.maxScrollX?F.maxScrollX:H.left;H.top=H.top>F.minScrollY?F.minScrollY:H.top<F.maxScrollY?F.maxScrollY:H.top;G=G===undefined?v.max(v.abs(H.left)*2,v.abs(H.top)*2):G;F.scrollTo(H.left,H.top,G)},scrollToPage:function(G,F,I){var H=this,m,J;I=I===undefined?400:I;if(H.options.onScrollStart){H.options.onScrollStart.call(H)}m=-H.wrapperW*G;J=-H.wrapperH*F;if(m<H.maxScrollX){m=H.maxScrollX}if(J<H.maxScrollY){J=H.maxScrollY}H.scrollTo(m,J,I)},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(t,d);this._unbind(e,d);this._unbind(x,d)},enable:function(){this.enabled=true},stop:function(){if(this.options.useTransition){this._unbind(n)}else{B(this.aniTime)}this.steps=[];this.moved=false;this.animating=false},isReady:function(){return !this.moved&&!this.animating}};function s(m){if(u===""){return m}m=m.charAt(0).toUpperCase()+m.substr(1);return u+m}b=null;if(typeof exports!=="undefined"){exports.iScroll=w}else{d.iScroll=w}(function(H,F,K){if(!H){return}var m=F.iScroll,J=[].slice,G=(function(){var L={},N=0,M="_sid";return function(P,Q){var O=P[M]||(P[M]=++N);Q!==K&&(L[O]=Q);Q===null&&delete L[O];return L[O]}})(),I;F.iScroll=I=function(O,N){var M=[].slice.call(arguments,0),L=new m(O,N);G(O,L);return L};I.prototype=m.prototype;H.fn.iScroll=function(N){var M=J.call(arguments,1),P=typeof N==="string"&&N,L,O;H.each(this,function(Q,R){O=G(R)||I(R,H.isPlainObject(N)?N:K);if(P==="this"){L=O;return false}else{if(P){if(!H.isFunction(O[P])){throw new Error("iScroll没有此方法："+P)}L=O[P].apply(O,M);if(L!==K&&L!==O){return false}L=K}}});return L!==K?L:this}})(d.Zepto||null,d)})(window,document);