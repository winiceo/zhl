ml=new Array(31,28,31,30,31,30,31,31,30,31,30,31);
nm=new Array();
nm[0]=new Array(0,"0217","0318","0417","0517","0615","0715","0814","0912","1011","1110","1209","1308");
nm[1]=new Array(0,"0206","0308","0406","0506","0605","0704","0803","0901","1001","1030","1129","1228");
nm[2]=new Array(5,"0127","0225","0326","0424","0524","0622","0722","0820","0919","1019","1117","1217","1315");
nm[3]=new Array(0,"0214","0315","0414","0513","0611","0711","0810","0908","1008","1107","1206","1305");
nm[4]=new Array(0,"0203","0305","0403","0503","0601","0630","0730","0828","0927","1027","1125","1225");
nm[5]=new Array(3,"0124","0222","0324","0422","0522","0620","0719","0818","0916","1016","1114","1214","1313");
nm[6]=new Array(0,"0212","0312","0411","0510","0609","0708","0806","0905","1004","1103","1202","1301");
nm[7]=new Array(8,"0131","0302","0331","0430","0529","0628","0727","0825","0924","1023","1122","1221","1320");
nm[8]=new Array(0,"0218","0320","0419","0519","0617","0717","0815","0913","1013","1111","1211","1309");
nm[9]=new Array(0,"0208","0309","0408","0508","0606","0706","0804","0903","1002","1101","1130","1230");
nm[10]=new Array(6,"0128","0227","0327","0426","0525","0624","0724","0822","0921","1020","1119","1218","1317");
nm[11]=new Array(0,"0215","0317","0415","0515","0613","0713","0811","0910","1010","1108","1208","1306");
nm[12]=new Array(0,"0205","0306","0405","0504","0602","0702","0731","0830","0929","1028","1127","1227");
nm[13]=new Array(4,"0125","0224","0325","0424","0523","0621","0721","0819","0918","1017","1116","1216","1315");
nm[14]=new Array(0,"0213","0314","0412","0512","0610","0709","0808","0906","1006","1104","1204","1303");
nm[15]=new Array(0,"0202","0303","0402","0501","0531","0629","0728","0827","0925","1024","1123","1223");
nm[16]=new Array(3,"0121","0220","0322","0421","0520","0619","0718","0816","0915","1014","1112","1212","1311");
nm[17]=new Array(0,"0209","0311","0410","0509","0608","0708","0806","0904","1004","1102","1202","1231");
nm[18]=new Array(7,"0130","0228","0329","0427","0527","0626","0725","0824","0922","1022","1120","1220","1318");
nm[19]=new Array(0,"0217","0318","0417","0516","0615","0714","0813","0912","1011","1110","1209","1308");
nm[20]=new Array(0,"0206","0308","0406","0505","0604","0703","0802","0901","0930","1030","1129","1228");
nm[21]=new Array(5,"0127","0225","0327","0425","0524","0623","0722","0821","0919","1019","1118","1218","1316");
nm[22]=new Array(0,"0215","0315","0414","0513","0611","0711","0809","0908","1007","1106","1206","1304");
nm[23]=new Array(0,"0203","0305","0403","0503","0601","0630","0730","0828","0926","1026","1125","1224");
nm[24]=new Array(4,"0123","0222","0324","0422","0522","0620","0719","0818","0916","1015","1114","1214","1312");
nm[25]=new Array(0,"0211","0313","0412","0511","0610","0709","0807","0906","1005","1103","1203","1301");
nm[26]=new Array(8,"0131","0301","0331","0429","0529","0627","0727","0825","0924","1023","1121","1221","1319");
nm[27]=new Array(0,"0218","0320","0418","0518","0617","0716","0815","0913","1013","1111","1211","1309");
nm[28]=new Array(0,"0207","0309","0407","0507","0606","0705","0804","0903","1002","1101","1130","1230");
nm[29]=new Array(6,"0128","0227","0328","0426","0526","0624","0724","0823","0921","1021","1120","1219","1318");
nm[30]=new Array(0,"0216","0317","0415","0514","0613","0712","0811","0909","1009","1108","1207","1306");
nm[31]=new Array(0,"0205","0306","0405","0504","0602","0702","0731","0829","0928","1028","1126","1226");
nm[32]=new Array(4,"0125","0224","0325","0424","0523","0621","0721","0819","0917","1017","1115","1215","1314");
nm[33]=new Array(0,"0213","0315","0413","0513","0611","0710","0809","0907","1006","1105","1204","1303");
nm[34]=new Array(0,"0202","0303","0401","0501","0531","0629","0728","0827","0925","1024","1123","1222");
nm[35]=new Array(2,"0121","0220","0321","0420","0520","0618","0718","0816","0915","1014","1112","1212","1310");
nm[36]=new Array(0,"0209","0310","0409","0509","0607","0707","0806","0904","1004","1102","1202","1231");
nm[37]=new Array(6,"0129","0228","0329","0428","0527","0626","0726","0824","0923","1023","1121","1221","1319");
nm[38]=new Array(0,"0217","0318","0416","0516","0614","0714","0812","0911","1011","1109","1209","1308");
nm[39]=new Array(0,"0206","0308","0406","0505","0604","0703","0802","0831","0930","1029","1128","1228");
nm[40]=new Array(5,"0127","0225","0327","0425","0524","0623","0722","0820","0919","1018","1117","1217","1316");
nm[41]=new Array(0,"0215","0316","0415","0514","0612","0712","0810","0908","1008","1106","1206","1305");
nm[42]=new Array(0,"0204","0304","0403","0503","0601","0630","0730","0828","0926","1026","1124","1224");
nm[43]=new Array(3,"0123","0221","0323","0422","0521","0620","0719","0818","0916","1015","1114","1213","1312");
nm[44]=new Array(0,"0210","0312","0411","0511","0609","0709","0807","0906","1005","1103","1203","1301");
nm[45]=new Array(8,"0131","0301","0331","0430","0529","0628","0727","0826","0925","1024","1122","1222","1320");
nm[46]=new Array(0,"0219","0319","0418","0517","0616","0716","0814","0913","1012","1111","1211","1309");
nm[47]=new Array(0,"0207","0309","0407","0507","0605","0705","0803","0902","1002","1031","1130","1230");
nm[48]=new Array(5,"0128","0227","0328","0426","0526","0624","0723","0822","0921","1020","1119","1219","1317");
nm[49]=new Array(0,"0216","0318","0416","0515","0614","0713","0811","0910","1009","1108","1208","1307");

function length(y,m){
if((m==2)&&((y+50)%4==0)) return 29;
else return ml[(m+11)%12];
}

function ctog(form){
y=form.year.selectedIndex;
m=form.month.selectedIndex+1;
d=form.day.selectedIndex+1;
if((form.r.checked)&&(m!=nm[y][0])){
form.answer.value="不存在这个日期";
return;
}
if(((form.r.checked)&&(m==nm[y][0]))||((nm[y][0]>0)&&(m>nm[y][0]))) m=m+1;
outm=Number(nm[y][m].substring(0,2));
outd=Number(nm[y][m].substring(2,4))+d-1;
if(outd>length(y,outm)){
outd=outd-length(y,outm);
outm=outm+1;
}
outy=y+1950;
if(outm>12){
outm=outm-12;
outy=outy+1;
}
form.answer.value="公历"+outy+"年"+outm+"月"+outd+"日";
}

function gtoc(form){
y=form.year.selectedIndex;
m=form.month.selectedIndex+1;
d=form.day.selectedIndex+1;
if(d>length(y,m)){
form.answer.value="不存在这个日期";
return;
}
md=String(d);
if (md.length<2) md="0"+md;
md=String(m)+md;
if (md.length<4) md="0"+md;
for(i=0;i<=12;i++) {
if((Number(nm[y][i+1])>Number(md))||(i+1==nm[y].length)) break;
}
if(i==0){
if(y==0){
form.answer.value="超出计算范围";
return;
}
y=y-1;
i=(nm[y].length)-1;
md=String(Number(md)+1200);
if(Number(nm[y][i])>Number(md)) i=i-1;
}
if(nm[y][i].substring(0,2)==md.substring(0,2)) outd=Number(md.substring(2,4))-Number(nm[y][i].substring(2,4))+1;
else outd=length(y,Number(nm[y][i].substring(0,2)))+Number(md.substring(2,4))-Number(nm[y][i].substring(2,4))+1;
outm=i;
r="";
if(nm[y][0]!=0){
if(outm==nm[y][0]+1) rn="闰";
if(outm>nm[y][0]) outm=outm-1;
}
outy=y+1950;
form.answer.value="农历"+outy+"年"+r+outm+"月"+outd+"日";
}